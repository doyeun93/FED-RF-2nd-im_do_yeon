//// ë„ê¹¨ë¹„ pj ë©”ì¸ js - main.js ////

// ê³µí†µì²˜ë¦¬ í•¨ìˆ˜ ë¶ˆëŸ¬ì˜¤ê¸° : ê°€ì¥ ë¨¼ì € ì²˜ë¦¬í•œë‹¤

import setElement from "./common.js";
setElement(); // í•¨ìˆ˜ í˜¸ì¶œ

// ë‚˜ì˜ í•¨ìˆ˜ ë¶ˆëŸ¬ì˜¤ê¸°
import myFn from "./my_function.js";

//  ë¶€ë“œëŸ¬ìš´ ìŠ¤í¬ë¡¤ ë¶ˆëŸ¬ì˜¤ê¸°
import SmoothScroll from "./smoothScroll23.js";

///// ë°ì´í„° ì„¸íŒ… ë¶ˆëŸ¬ì˜¤ê¸°
// = import {previewData} from "../data/dkb_data.js";
import * as dkbData from "../data/dkb_data.js";

// ë“œë˜ê·¸ ìŠ¬ë¼ì´ë“œ ë¶ˆëŸ¬ì˜¤ê¸°
import setSlide from "./drag_slide_multi.js";

// ì„œë¸Œë°•ìŠ¤ ì…‹íŒ… ì½”ë“œ ë¶ˆëŸ¬ì˜¤ê¸° ////
import showSubBox from "./sub_cont.js";
// ë°•ìŠ¤ ìƒì„±í›„ í˜¸ì¶œ(íë¡œ ë³´ë‚´ë©´ ìŠ¤íƒì‹¤í–‰í›„ í˜¸ì¶œ!)
setTimeout(showSubBox);
// ì‹œê°„ì„ 0ìœ¼ë¡œ ì¨ë„, ì‹¬ì§€ì–´ ì‹œê°„ì„ ì•ˆì¨ë„
// setTimout()ìœ¼ë¡œ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´
// ìŠ¤íƒì— ì‹¤í–‰í›„ íì—ì„œ ê°€ì§€ê³  ìˆë‹¤ê°€
// ìŠ¤íƒ ì½”ë“œ ì‹¤í–‰ì´ ëª¨ë‘ ëë‚œí›„ í˜¸ì¶œí•˜ì—¬ ì‹¤í–‰í•¨!

/******************************************************
 ******************** êµ¬í˜„ ì½”ë“œ íŒŒíŠ¸ ******************
 ******************************************************/

// 1. ë¶€ë“œëŸ¬ìš´ ìŠ¤í¬ë¡¤ í˜¸ì¶œ
const mySmooth = new SmoothScroll(document, 60, 25);

// console.log('ëª¨ë“ˆë¡œ ë©”ì¸ js í˜¸ì¶œ', document.querySelector('.top-menu'));

// 3. ì¸íŠ¸ë¡œ ë™ì˜ìƒ íŒŒíŠ¸ í´ë¦­ì‹œ ë™ì˜ìƒíƒœê·¸ ë„£ê¸°
// ì´ë²¤íŠ¸ ëŒ€ìƒ === ë³€ê²½ ëŒ€ìƒ : .intro-mv-img

const introMv = myFn.qs(".intro-mv-img");

introMv.onclick = () => {
  console.log("ì¸íŠ¸ë¡œì˜ìƒ");
  // 1. ë™ì˜ìƒ ë„£ê¸°
  introMv.innerHTML = `
  <video src="./images/intro_mv.mp4" autoplay controls></video>
  `;

  // 2. í´ë˜ìŠ¤ off ì§€ìš°ê¸°(í”Œë ˆì´ë²„íŠ¼ ì•ˆë‚˜ì˜¤ê²Œí•¨)
  introMv.classList.remove("off");
}; ////////////// click ì´ë²¤íŠ¸ í•¨ìˆ˜

/******************************************************************************** 
  [ì½”ë“œ ë©í•‘ì´ë€?]
      ë¡œë”©ì‹œ ë°”ë¡œ ì‹¤í–‰ë¨ -> ì‹¤í–‰ì½”ë“œë¥¼ ì§€ì—­í™”í•˜ê³ ì í•  ë•Œ í•¨ìˆ˜ë¡œ ë§Œë“¤ê³  ì´ë¥¼ í˜¸ì¶œ.  
      ê·¸ëŸ¬ë‚˜ ë¶ˆí¸í•˜ì—¬ ìµëª…í•¨ìˆ˜ë¡œ ë§Œë“¤ê³  ë°”ë¡œ ì‹¤í–‰í•˜ê²Œ í•˜ë©´ ë¨ 
      ëª©ì  : ë³€ìˆ˜,í•¨ìˆ˜ ì¶©ëŒ ë°©ì§€
      ë°©ë²• : (ìµëª…í•¨ìˆ˜)() -> ë°”ë¡œ ì‹¤í–‰í•¨ (ì½”ë“œì˜ ì§€ì—­í™” ë˜ëŠ” ì½”ë“œ ë©í•‘)
      ì‹¤ì œ ì½”ë“œ : (()=>{ì½”ë“œ}) ()
      ì‹¤ì œ ì½”ë“œ : (function(){ì½”ë“œ})()

 ********************************************************************************/

////////////////// 2. ë¯¸ë¦¬ë³´ê¸° íŒŒíŠ¸ ë‚´ìš© ë„£ê¸° //////////////////////
////// ë¯¸ë¦¬ë³´ê¸° êµ¬í˜„ ì½”ë“œë©í•‘ êµ¬ì—­  /////////////
(() => {
  // ëŒ€ìƒ : .preview-box
  const previewBox = myFn.qs(".preview-box");

  // ë°ì´í„° : dkb-data.jsì˜ previewData ë°°ì—´
  const pData = dkbData.previewData;
  // ë°ì´í„° ì›ë³¸ì˜ ì •ë ¬ì„ ë‚´ë¦¼ì°¨ìˆœìœ¼ë¡œ ë³€ê²½
  // ë°°ì—´ê°’ì¸ ê°ì²´ì˜ idxí‚¤ ê°’ì„ ê¸°ì¤€ìœ¼ë¡œ ë‚´ë¦¼ì°¨ìˆœ ì •ë ¬ í•  ë•Œ ë¬¸ìí˜• ìˆ«ìì´ë¯€ë¡œ
  // Number() ìˆ«ìí˜• ë³€í™˜ ë©”ì„œë“œë¡œ ì‹¸ì„œ ìˆ«ìë¡œì¨ ë¹„êµí•˜ì—¬ ì •í™•í•œ ë‚´ë¦¼ì°¨ìˆœì´ ë˜ë„ë¡ í•œë‹¤

  pData.sort((a, b) =>
    Number(a.idx) == Number(b.idx) ? 0 : Number(a.idx) < Number(b.idx) ? 1 : -1
  );
  //#í•´ì„ : aë‘ bê°€ ê°™ìœ¼ë©´? ì•„ë¬´ê²ƒë„ ì•ˆí•¨ , bê°€ aë³´ë‹¤ í¬ë©´ ìˆœì„œë°”ê¿ˆ, aê°€ bë³´ë‹¤ í¬ë©´ ìˆœì„œìœ ì§€
  // êµ¬ì¡° : ul>li>h3+p

  // 1. 8ê°œë§Œ ë°ì´í„°ë¥¼ htmlë¡œ êµ¬ì„±í•˜ì—¬ ë„£ëŠ”ë‹¤
  // html ì½”ë“œ ë³€ìˆ˜
  // let hcode = `<ul class="fx-box">`;

  // // li êµ¬ì„±ì„ hcodeë³€ìˆ˜ì— ëŒ€ì…ì—°ì‚°ìë¡œ í• ë‹¹í•¨

  // for (let i = 0; i < 8; i++) {
  //   hcode += `
  //   <li>
  //     <h3>ğŸ°${pData[i].title}</h3>
  //     <p>${pData[i].story}</p>
  //   </li>
  // `;
  // } ////// forë¬¸ ///////////
  // hcode += `</ul>`;

  // ë°ì´í„° í™•ì¸
  // console.log(hcode);
  // console.log('ëŒ€ìƒ:',previewBox, 'ë¯¸ë¦¬ë³´ê¸° data:',pData);

  // 2. í™”ë©´ì¶œë ¥í•˜ê¸° -> map()ìœ¼ë¡œ í•œë²ˆì— ì¶œë ¥í•˜ì! ///////
  previewBox.innerHTML = `
    <ul class="fx-box">
      ${pData
        .map(
          (v) => `
        <li data-idx="${v.idx}">
            <h3>${v.title}</h3>
            <p>${"ë°©ì†¡ì¼ : " + v.date + " " + v.story}</p>
        </li>      
      `
        )
        .join("")}
    </ul>
  `;
})(); ////// ë¯¸ë¦¬ë³´ê¸° ì½”ë“œ ë©í•‘ êµ¬ì—­ ì¢…ë£Œ ////////////

////////////////// 3. í˜„ì¥í¬í†  íŒŒíŠ¸ ë‚´ìš© ë„£ê¸° //////////////////////
////// í˜„ì¥í¬í†  êµ¬í˜„ ì½”ë“œë©í•‘ êµ¬ì—­  /////////////
(() => {
  // ëŒ€ìƒ : .live-box
  const liveBox = myFn.qs(".live-box");

  // ë°ì´í„° : dkb-data.jsì˜ liveData ë°°ì—´
  const lvData = dkbData.liveData;
  // êµ¬ì¡° : ul > li > figure > img + figcaption

  // 1. 8ê°œë§Œ ë°ì´í„°ë¥¼ htmlë¡œ êµ¬ì„±í•˜ì—¬ ë„£ëŠ”ë‹¤
  // html ì½”ë“œ ë³€ìˆ˜
  // let hcode = `<ul>`;

  // // li êµ¬ì„±ì„ hcodeë³€ìˆ˜ì— ëŒ€ì…ì—°ì‚°ìë¡œ í• ë‹¹í•¨
  // // liveData ë°°ì—´ì€ ì´ 8ê°œì„. ëª¨ë‘ ëŒê¸° ì„¸íŒ…

  // lvData.forEach((v) => {
  //   hcode += `
  //   <li>
  //     <figure>
  //       <img src="./images/live_photo/${v.imgName}.jpg" alt="${v.title}" >
  //       <figcaption>${v.title}</figcaption>
  //     </figure>
  //   </li>
  // `;
  // }); ////// foreachë¬¸ ///////////

  // hcode += `</ul>`;

  // ë°ì´í„° í™•ì¸
  // console.log(hcode);
  // console.log('ëŒ€ìƒ:', liveBox, 'ë¯¸ë¦¬ë³´ê¸° data:',lvData);

  ////// 2.  í™”ë©´ ì¶œë ¥í•˜ê¸° -> map()ìœ¼ë¡œ ë°ì´í„° ìƒì„±í•˜ê¸° ///////////////
  liveBox.innerHTML = `
  <ul>
  ${lvData.map(v=>`
    <li data-idx="${v.idx}">
      <figure>
        <img src="./images/live_photo/${v.imgName}.jpg" alt="${v.title}" >
        <figcaption>${v.title}</figcaption>
      </figure>
    </li>
  `).join('')}
  </ul>
  `;
})(); ////// í˜„ì¥í¬í†  ì½”ë“œ ë©í•‘ êµ¬ì—­ ì¢…ë£Œ ////////////



////////////////// 4. ëŒ€í‘œì´ë¯¸ì§€ íŒŒíŠ¸ ë‚´ìš© ë„£ê¸° //////////////////////
////// ëŒ€í‘œì´ë¯¸ì§€ êµ¬í˜„ ì½”ë“œë©í•‘ êµ¬ì—­  /////////////
(() => {
  // ëŒ€ìƒ : .poster-box
  const posterBox = myFn.qs(".poster-box");

  // ë°ì´í„° : dkb-data.jsì˜ posterData ë°°ì—´
  // ì§€ì—­í™” ë˜ì–´ìˆê¸°ë•Œë¬¸ì— ê°™ì€ ë³€ìˆ˜ë¥¼ ì„ ì–¸í•´ë„ ê´œì¶š
  const pData = dkbData.posterData;
  // êµ¬ì¡° : ul > li > figure > img + figcaption

  // 1. 8ê°œë§Œ ë°ì´í„°ë¥¼ htmlë¡œ êµ¬ì„±í•˜ì—¬ ë„£ëŠ”ë‹¤
  // html ì½”ë“œ ë³€ìˆ˜
  let hcode = `<ul>`;

  // li êµ¬ì„±ì„ hcodeë³€ìˆ˜ì— ëŒ€ì…ì—°ì‚°ìë¡œ í• ë‹¹í•¨
  // posterData ë°°ì—´ì€ ì´ 5ê°œì„. ëª¨ë‘ ëŒê¸° ì„¸íŒ…

  pData.forEach((v) => {
    hcode += `
    <li>
      <figure>
        <img src="./images/poster_img/${v.imgName}.jpg" alt="${v.title}" >
        <figcaption>${v.title}</figcaption>
      </figure>
    </li>
  `;
  }); ////// foreachë¬¸ ///////////

  hcode += `</ul>`;

  // ë°ì´í„° í™•ì¸
  // console.log(hcode);
  // console.log('ëŒ€ìƒ:', posterBox, 'ë¯¸ë¦¬ë³´ê¸° data:',pData);

  ////// 2.  í™”ë©´ ì¶œë ¥í•˜ê¸° ///////////////
  posterBox.innerHTML = hcode;
})(); ////// ëŒ€í‘œì´ë¯¸ì§€ ì½”ë“œ ë©í•‘ êµ¬ì—­ ì¢…ë£Œ ////////////

///////////////////// 5. ìµœì‹ ë™ì˜ìƒ íŒŒíŠ¸  ////////////////////////
// ë°ì´í„° íƒœê·¸ êµ¬ì„±í•˜ì—¬ í™”ë©´ ì¶œë ¥í•˜ê¸°
////// ìµœì‹ ë™ì˜ìƒ ì½”ë“œ ë©í•‘ êµ¬ì—­ ì‹œì‘ ////////////
(() => {
  // 5-1. ë³€ê²½ëŒ€ìƒ : .clip-box
  const clipBox = myFn.qs(".clip-box");

  // 5-2. ìƒì„±ì½”ë“œ ë³€ìˆ˜
  let hcode = `<ul class="slide">`;

  // ë°ì´í„°ë§Œí¼ ìˆœíšŒí•˜ì—¬ liì½”ë“œ ë§Œë“¤ê¸°
  // ë°ì´í„°: dkbData.clipData
  dkbData.clipData.forEach((v) => {
    hcode += `
      <li>
        <div class="clip-mv-box">
          <img src="./images/clip_img/${v.idx}.jpg" alt="${v.subtit}">
        </div>
          <h4>${v.subtit}</h4>
          <h3>${v.title}</h3>
      </li>
    `;
  }); //////// foreach //////////////////
  hcode += `</ul>`;

  // 5-3. í™”ë©´ ì¶œë ¥í•˜ê¸°
  clipBox.innerHTML = hcode;
})(); ////// ìµœì‹ ë™ì˜ìƒ ì½”ë“œ ë©í•‘ êµ¬ì—­ ì¢…ë£Œ ////////////

// íƒœê·¸ êµ¬ì„± í›„ ë“œë˜ê·¸ ìŠ¬ë¼ì´ë“œ í˜¸ì¶œí•˜ê¸°
setSlide("banbx");

/*******************************************************
    ë©”ì¸ í˜ì´ì§€ìš© ë„ê¹¨ë¹„ ë©”ë‰´ ìŠ¤í¬ë¡¤ì´ë™ ì œì´ì¿¼ë¦¬ êµ¬í˜„
 *******************************************************/
// ë©”ë‰´ í´ë¦­ ëŒ€ìƒ : .spart-menu a
$(".spart-menu a").click((e) => {
  // aìš”ì†Œ í´ë¦­ì‹œ ê¸°ë³¸ì´ë™ ë§‰ê¸°
  e.preventDefault();

  // 1. í´ë¦­í•œ aìš”ì†Œì˜ ê¸€ì ì½ì–´ì˜¤ê¸°
  let txt = $(e.target).text();
  // console.log(txt);

  // 2. ì´ë™í•œ ìœ„ì¹˜ê°’ ì•Œì•„ë‚´ê¸°
  let pos;
  // ì´ë™í•  ìœ„ì¹˜ì˜ ë°•ìŠ¤ ì•„ì´ë”” ë§¤ì¹­í•˜ê¸°
  switch (txt) {
    case "ë¯¸ë¦¬ë³´ê¸°":
      pos = "#preview-area";
      break;
    case "í”„ë¡œê·¸ë¨ ì†Œê°œ":
      pos = "#intro-area";
      break;
    case "ë™ì˜ìƒ":
      pos = "#clip-video-area";
      break;
    case "í˜„ì¥ í¬í† ":
      pos = "#real-photo-area";
      break;
    case "ëŒ€í‘œ í¬ìŠ¤í„°":
      pos = "#main-photo-area";
      break;
  } ////// switch caseë¬¸

  // ë§Œì•½ í•´ë‹¹ëœ ìš”ì†Œê°€ ì—†ìœ¼ë©´ ì—¬ê¸°ì„œ ëŒì•„ê°€
  // ìœ„ì—ì„œ í• ë‹¹ì•ˆë˜ë©´ undefinedì´ë©´ ifë¬¸ì—ì„œ false ì²˜ë¦¬ë¨
  // !(NOT) ì—°ì‚°ìë¡œ ë°˜ëŒ€ë¡œ ë’¤ì§‘ìœ¼ë©´ falseì¼ë•Œ ì²˜ë¦¬í•¨
  if (!pos) return;

  // 2-2. í•´ë‹¹ ë°•ìŠ¤ ì•„ì´ë””ì˜ ìœ„ì¹˜ê°’ ì•Œì•„ë‚´ê¸°
  // offset().top ì œì´ì¿¼ë¦¬ top ìœ„ì¹˜ê°’ ì •ë³´
  pos = $(pos).offset().top;
  console.log("ìœ„ì¹˜ê°’:", pos);

  // 3. ìŠ¤í¬ë¡¤ ì• ë‹ˆë©”ì´ì…˜ ì´ë™í•˜ê¸°
  // ì œì´ì¿¼ë¦¬ëŠ” ì´ê²ƒì„ ì •ë§ ì˜í•œë‹¤
  // $("html, body").animate({scrollTop:ëª‡ px}, ì‹œê°„, ì´ì§•, í•¨ìˆ˜)
  // ì‹œê°„ : 1/1000 ì´ˆ
  // ì´ì§• : http://easings.net

  $("html,body").animate(
    { scrollTop: pos + "px" },
    2000,
    "easeInOutQuint",
    // ì½œë°±í•¨ìˆ˜(ì• ë‹ˆ í›„ í˜¸ì¶œë˜ëŠ” í•¨ìˆ˜)

    () => {
      // ì´ë™ í›„ ë¶€ë“œëŸ¬ìš´ ìŠ¤í¬ë¡¤ ìœ„ì¹˜ê°’ ì—…ë°ì´íŠ¸ í•„ìˆ˜
      // ì´ê²ƒ ì•ˆí•˜ë©´ ìœ„ì¹˜ ì´ë™ í›„ ìŠ¤í¬ë¡¤ì‹œ íŠ
      // ìƒì„±ì í•¨ìˆ˜ í•˜ìœ„ ê°ì²´ ë³€ìˆ˜ë¡œ ë“±ë¡ëœ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•¨
      mySmooth.setScrollPos();
    }
  );
}); ///////// ë„ê¹¨ë¹„ íŒŒíŠ¸ ë©”ë‰´ í´ë¦­ í•¨ìˆ˜ ///////////////////

// ê°œë³„ë°•ìŠ¤ì— ë¶€ë“œëŸ¬ìš´ ìŠ¤í¬ë¡¤ ìƒì„±ì í•¨ìˆ˜ ì ìš©í•˜ê¸° ì—°ìŠµ
// $(".preview-box").css({
//   height: "200px",
//   overflow: "auto"
// })

// .on("wheel",e=>{
//   e.stopPropagation(); // ì´ë²¤íŠ¸ê°’ ìœ„ë¡œ ì˜¬ë¼ê°€ëŠ”ê±° ë§‰ëŠ”ê±°
// })

// // ë¶€ë“œëŸ¬ìš´ ìŠ¤í¬ë¡¤ ê°œë³„ë°•ìŠ¤ ì ìš©
// const smallSmooth = new SmoothScroll( myFn.qs(".preview-box"), 60, 20);
